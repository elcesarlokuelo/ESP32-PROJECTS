Version 4
SHEET 1 2700 1012
WIRE 1248 -32 1072 -32
WIRE 496 -16 480 -16
WIRE 608 -16 576 -16
WIRE 1248 -16 1248 -32
WIRE 1248 -16 1184 -16
WIRE 96 16 -16 16
WIRE 256 16 96 16
WIRE 2176 16 1936 16
WIRE -656 32 -880 32
WIRE 96 32 96 16
WIRE 256 32 256 16
WIRE 1184 32 1184 -16
WIRE 1248 32 1248 -16
WIRE 480 48 480 -16
WIRE 480 48 464 48
WIRE 512 48 480 48
WIRE 608 64 608 -16
WIRE 608 64 576 64
WIRE 704 64 608 64
WIRE 1072 64 1072 -32
WIRE 496 80 464 80
WIRE 512 80 496 80
WIRE -16 96 -16 16
WIRE -880 112 -880 32
WIRE 496 112 496 80
WIRE -656 128 -656 32
WIRE 96 128 96 112
WIRE 144 128 96 128
WIRE 256 128 256 112
WIRE 320 128 256 128
WIRE 1184 144 1184 112
WIRE 1248 144 1248 112
WIRE 1248 144 1184 144
WIRE 96 160 96 128
WIRE 256 160 256 128
WIRE 1248 160 1248 144
WIRE 1488 160 1248 160
WIRE 1936 160 1936 16
WIRE 1248 192 1248 160
WIRE 2176 208 2176 96
WIRE 2320 208 2176 208
WIRE 2176 240 2176 208
WIRE -16 256 -16 176
WIRE 96 256 96 240
WIRE 96 256 -16 256
WIRE 176 256 96 256
WIRE 240 256 256 240
WIRE 240 256 176 256
WIRE 496 272 496 192
WIRE -880 304 -880 192
WIRE -656 304 -656 208
WIRE -656 304 -880 304
WIRE 176 304 176 256
WIRE 1072 304 1072 144
WIRE 1248 304 1248 272
WIRE 1248 304 1072 304
WIRE -880 320 -880 304
WIRE 1248 336 1248 304
WIRE 1936 368 1936 240
WIRE 2176 368 2176 320
WIRE 2176 368 1936 368
WIRE 1936 384 1936 368
FLAG 176 304 0
FLAG 144 128 Va
IOPIN 144 128 Out
FLAG 320 128 Vb
IOPIN 320 128 Out
FLAG -880 320 0
FLAG -656 32 Vout
FLAG 464 48 Vb
IOPIN 464 48 In
FLAG 464 80 Va
IOPIN 464 80 In
FLAG 704 64 Vout1
IOPIN 704 64 Out
FLAG 496 272 0
FLAG 1488 160 Vout2
IOPIN 1488 160 Out
FLAG 1248 336 0
FLAG 2320 208 Vout3
IOPIN 2320 208 Out
FLAG 1936 384 0
SYMBOL res 80 16 R0
SYMATTR InstName R1
SYMATTR Value 220
SYMBOL res 80 144 R0
SYMATTR InstName R2
SYMATTR Value 776470
SYMBOL res 240 16 R0
SYMATTR InstName R3
SYMATTR Value 220
SYMBOL res 240 144 R0
SYMATTR InstName R4
SYMATTR Value R=20k*exp(3950*(1/(temp+273)-1/298))
SYMBOL voltage -16 80 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL res -672 112 R0
SYMATTR InstName R5
SYMATTR Value R=20k*exp(3950*(1/(temp+273)-1/298))
SYMBOL current -880 192 R180
WINDOW 0 24 80 Left 2
WINDOW 3 24 0 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I1
SYMATTR Value 1
SYMBOL res 592 -32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 680
SYMBOL OpAmps\\opamp 544 0 R0
SYMATTR InstName U1
SYMBOL res 480 96 R0
SYMATTR InstName R7
SYMATTR Value 680
SYMBOL res 1232 176 R0
SYMATTR InstName R14
SYMATTR Value 10k
SYMBOL res 1232 16 R0
WINDOW 3 66 76 Left 2
SYMATTR Value R=20k*exp(3950*(1/(temp+273)-1/298))
SYMATTR InstName R15
SYMBOL voltage 1072 48 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 3.3
SYMBOL res 1168 16 R0
SYMATTR InstName R8
SYMATTR Value 20k
SYMBOL res 2160 0 R0
SYMATTR InstName R10
SYMATTR Value R=20k*exp(3950*(1/(temp+273)-1/298))
SYMBOL res 2160 224 R0
SYMATTR InstName R11
SYMATTR Value 10k
SYMBOL voltage 1936 144 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 3.3
TEXT -48 328 Left 2 !.dc temp -40 120
TEXT -40 360 Left 2 !.inc opamp.sub
TEXT -952 -80 Left 2 ;Circuit to see the Temperature to Resistance relation.\nYou only need to divide de voltage at Vout between\nthe current I(i1) = 1A
TEXT -40 -192 Left 2 ;First iteration of the circuit. We can see with a DC sweep between\nthe limits of the range (-40ºC to 120 ºC) that we get a voltage in Vout1\nbetween 0 and 3.3V, so we use all the range in de ADC of the esp32.\nBut the resolution changes a lot, so we get less accuracy when the\ntemperature is low
TEXT 1072 -168 Left 2 ;The most simple and used configuration is a voltage divider. The first assembly tries to\nlinearize tho voltage output, but reduces the range used of the CAD. The second one\ndoesnt try to linearize, but uses more range of the ADC converter.
